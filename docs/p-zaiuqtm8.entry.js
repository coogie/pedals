import{r as e,h as t,g as s,c as a}from"./p-31516eb7.js";class o{constructor(t){e(this,t)}render(){return t("div",{class:"app-home"},t("pedal-board",null))}static get style(){return".app-home{padding:10px}button{background:#5851ff;color:#fff;margin:8px;border:none;font-size:13px;font-weight:700;text-transform:uppercase;padding:16px 20px;border-radius:2px;-webkit-box-shadow:0 8px 16px rgba(0,0,0,.1),0 3px 6px rgba(0,0,0,.08);box-shadow:0 8px 16px rgba(0,0,0,.1),0 3px 6px rgba(0,0,0,.08);outline:0;letter-spacing:.04em;-webkit-transition:all .15s ease;transition:all .15s ease;cursor:pointer}button:hover{-webkit-box-shadow:0 3px 6px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.1);box-shadow:0 3px 6px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.1);-webkit-transform:translateY(1px);transform:translateY(1px)}"}}const i={context:new AudioContext,source:null,pedals:[],toggleOnOff:(e,t)=>s=>{(void 0===s?e.gain.value:s)?(t.gain.value=1,e.gain.value=0):(t.gain.value=0,e.gain.value=1)},createSwitch(e,t,s=!1){const a=this.context.createGain(),o=this.context.createGain(),i=this.context.createGain(),l=this.toggleOnOff(a,o);return l(s),e.connect(a),t.connect(o),a.connect(i),o.connect(i),[i,l]},addPedal(e){this.pedals.push(e)},sealPedalBoard(){this.pedals.reduce((e,t)=>t(e),this.source).connect(this.context.destination)}};class l{constructor(t){e(this,t),this.playing=!1}componentWillLoad(){const e=i.context,t=document.createElement("audio");t.src="assets/audio/TheSeventies.mp3",t.loop=!0,this.audioNode=t,this.el.appendChild(t),i.source=e.createMediaElementSource(t)}componentDidLoad(){i.sealPedalBoard()}togglePlaying(){const e=i.context;"suspended"===e.state&&e.resume(),this.playing?this.playing&&(this.audioNode.pause(),this.playing=!1):(this.audioNode.play(),this.playing=!0)}render(){return t("div",{class:"pedal-board"},t("h1",null,"Pedals",t("button",{onClick:()=>this.togglePlaying()},this.playing?"◼":"►")),t("pedal-boost",null),t("pedal-overdrive",null))}get el(){return s(this)}static get style(){return""}}class n{constructor(t){e(this,t),this.active=!1,this.boost=1.5}componentWillLoad(){i.addPedal(e=>{const t=i.context,s=t.createGain(),a=t.createGain(),[o,l]=i.createSwitch(e,s,this.active);return this.toggle=l,this.boostNode=a,e.connect(a),a.connect(s),o})}setBoostValue(e){const t=parseFloat(e.detail);this.boostNode.gain.value=t}toggleActive(){this.active=!this.active,this.toggle()}render(){return t("div",{class:"pedal-boost"},t("h1",null,"<pedal-boost> ",this.active.toString()),t("button",{onClick:()=>this.toggleActive()},t("pre",null,this.active?"I":"O")),t("pedal-knob",{label:"Boost",min:0,max:3,value:this.boost,onRotate:e=>this.setBoostValue(e)}))}static get style(){return""}}class r{constructor(t){e(this,t),this.max=1,this.min=0,this.step="any",this.value=0,this.rotate=a(this,"rotate",7)}inputHandler(e){const t=parseFloat(e.target.value);this.rotate.emit(t)}render(){return t("div",{class:"pedal-knob"},t("label",{htmlFor:"knob"},this.label),t("input",{id:"knob",type:"range",min:this.min,max:this.max,step:this.step,value:this.value,onInput:e=>this.inputHandler(e)}))}static get style(){return""}}class c{constructor(t){e(this,t),this.active=!1,this.lowPassFreq=3e3,this.drive=30}componentWillLoad(){i.addPedal(e=>{const t=i.context,s=t.createGain();this.lowPassNode=t.createBiquadFilter(),this.overdriveNode=t.createWaveShaper();const[a,o]=i.createSwitch(e,s,this.active);return this.toggle=o,this.overdriveNode.curve=this.makeDistortionCurve(this.drive),this.overdriveNode.oversample="4x",this.lowPassNode.type="lowpass",this.lowPassNode.frequency.value=this.lowPassFreq,e.connect(this.overdriveNode),this.overdriveNode.connect(this.lowPassNode),this.lowPassNode.connect(s),a})}makeDistortionCurve(e){const t=e,s=new Float32Array(44100),a=Math.PI/180;let o,i=0;for(;i<44100;++i)s[i]=(3+t)*(o=2*i/44100-1)*20*a/(Math.PI+t*Math.abs(o));return s}setDriveValue(e){const t=parseFloat(e.detail);this.drive=t,this.overdriveNode.curve=this.makeDistortionCurve(this.drive)}setToneValue(e){const t=parseFloat(e.detail);this.lowPassFreq=t,this.lowPassNode.frequency.value=this.lowPassFreq}toggleActive(){this.active=!this.active,this.toggle()}render(){return t("div",{class:"pedal-overdrive"},t("h1",null,"<pedal-overdrive>"),t("button",{onClick:()=>this.toggleActive()},t("pre",null,this.active?"I":"O")),t("pedal-knob",{label:"Drive",min:20,max:120,value:this.drive,onRotate:e=>this.setDriveValue(e)}),t("pedal-knob",{label:"Tone",min:2e3,max:7e3,value:this.lowPassFreq,onRotate:e=>this.setToneValue(e)}))}static get style(){return""}}export{o as app_home,l as pedal_board,n as pedal_boost,r as pedal_knob,c as pedal_overdrive};