import{r as t,d as s,h as i,g as r}from"./p-a1608285.js";import{m as e}from"./p-40a14615.js";import"./p-986066ec.js";import{A as h}from"./p-b3d4310b.js";const o=()=>((1e17*Math.random()).toString().match(/.{4}/g)||[]).join("-"),n=(t,s,i)=>e(t,{path:s,exact:i,strict:!0}),a=t=>"STENCIL-ROUTE"===t.tagName;class c{constructor(i){t(this,i),this.group=o(),this.subscribers=[],this.queue=s(this,"queue")}componentWillLoad(){null!=this.location&&this.regenerateSubscribers(this.location)}async regenerateSubscribers(t){if(null==t)return;let s=-1;if(this.subscribers=Array.prototype.slice.call(this.el.children).filter(a).map((i,r)=>{const e=n(t.pathname,i.url,i.exact);return e&&-1===s&&(s=r),{el:i,match:e}}),-1===s)return;if(this.activeIndex===s)return void(this.subscribers[s].el.match=this.subscribers[s].match);this.activeIndex=s;const i=this.subscribers[this.activeIndex];this.scrollTopOffset&&(i.el.scrollTopOffset=this.scrollTopOffset),i.el.group=this.group,i.el.match=i.match,i.el.componentUpdated=t=>{this.queue.write(()=>{this.subscribers.forEach((t,s)=>{if(t.el.componentUpdated=void 0,s===this.activeIndex)return t.el.style.display="";this.scrollTopOffset&&(t.el.scrollTopOffset=this.scrollTopOffset),t.el.group=this.group,t.el.match=null,t.el.style.display="none"})}),this.routeViewsUpdated&&this.routeViewsUpdated(Object.assign({scrollTopOffset:this.scrollTopOffset},t))}}render(){return i("slot",null)}get el(){return r(this)}static get watchers(){return{location:["regenerateSubscribers"]}}}h.injectProps(c,["location","routeViewsUpdated"]);export{c as stencil_route_switch};