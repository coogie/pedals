import{r as e,h as t,g as s,c as a}from"./p-31516eb7.js";class o{constructor(t){e(this,t)}render(){return t("div",{class:"app-home"},t("pedal-board",null))}static get style(){return".app-home{padding:10px}button{background:#5851ff;color:#fff;margin:8px;border:none;font-size:13px;font-weight:700;text-transform:uppercase;padding:16px 20px;border-radius:2px;-webkit-box-shadow:0 8px 16px rgba(0,0,0,.1),0 3px 6px rgba(0,0,0,.08);box-shadow:0 8px 16px rgba(0,0,0,.1),0 3px 6px rgba(0,0,0,.08);outline:0;letter-spacing:.04em;-webkit-transition:all .15s ease;transition:all .15s ease;cursor:pointer}button:hover{-webkit-box-shadow:0 3px 6px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.1);box-shadow:0 3px 6px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.1);-webkit-transform:translateY(1px);transform:translateY(1px)}"}}const i={context:new AudioContext,sources:[],pedals:[],toggleOnOff:(e,t)=>s=>{(void 0===s?e.gain.value:s)?(t.gain.value=1,e.gain.value=0):(t.gain.value=0,e.gain.value=1)},createSwitch(e,t,s=!1){const a=this.context.createGain(),o=this.context.createGain(),i=this.context.createGain(),n=this.toggleOnOff(a,o);return n(s),e.connect(a),t.connect(o),a.connect(i),o.connect(i),[i,n]},addPedal(e){this.pedals.push(e)},sealPedalBoard(){const e=this.context.createGain();for(let t of this.sources)this.context.createMediaElementSource(t).connect(e);this.pedals.reduce((e,t)=>t(e),e).connect(this.context.destination)}};class n{constructor(t){e(this,t),this.playing=!1,this.demoFileNodes=[]}componentWillLoad(){const e=["FloatingRotary","NoFear","OrangeDrive","TheSeventies","TombComb","VintageCombo"],t=document.createDocumentFragment();for(let t of e){const e=document.createElement("audio");e.src=`assets/audio/${t}.mp3`,e.id=t,e.loop=!0,this.demoFileNodes.push(e),i.sources.push(e)}this.el.appendChild(t),this.setActiveAudioNode(0)}setActiveAudioNode(e){this.togglePlaying("pause"),this.audioNode=this.demoFileNodes[e]}componentDidLoad(){i.sealPedalBoard()}togglePlaying(e=null){if(!this.audioNode)return;const t=i.context;"suspended"===t.state&&t.resume(),e&&("pause"===e&&(this.audioNode.pause(),this.playing=!0),"play"===e&&(this.audioNode.play(),this.playing=!0)),this.playing?this.playing&&(this.audioNode.pause(),this.playing=!1):(this.audioNode.play(),this.playing=!0)}render(){return t("div",{class:"PedalBoard"},t("select",{onChange:e=>this.setActiveAudioNode(e.target.value)},this.demoFileNodes.map((e,s)=>t("option",{value:s},e.id))),t("button",{onClick:()=>this.togglePlaying()},this.playing?"◼":"►"),t("div",{class:"PedalBoard__pedals"},t("pedal-chorus",null),t("pedal-boost",null),t("pedal-overdrive",null)))}get el(){return s(this)}static get style(){return".PedalBoard__pedals{display:-ms-flexbox;display:flex}.PedalBoard__pedals>*{border:1px solid;margin:1em}"}}class l{constructor(t){e(this,t),this.active=!1,this.boost=1.5}componentWillLoad(){i.addPedal(e=>{const t=i.context,s=t.createGain(),a=t.createGain(),[o,n]=i.createSwitch(e,s,this.active);return this.toggle=n,this.boostNode=a,e.connect(a),a.connect(s),o})}setBoostValue(e){const t=parseFloat(e.detail);this.boostNode.gain.value=t}toggleActive(){this.active=!this.active,this.toggle()}render(){return t("div",{class:"pedal-boost"},t("h1",null,"<pedal-boost>"),t("pedal-knob",{label:"Boost",min:0,max:3,value:this.boost,onRotate:e=>this.setBoostValue(e)}),t("pedal-stomp",{isActive:this.active,onStomp:()=>this.toggleActive()}))}static get style(){return""}}class r{constructor(t){e(this,t),this.active=!1}componentWillLoad(){i.addPedal(e=>{const t=i.context,s=t.createGain(),[a,o]=i.createSwitch(e,s,this.active);this.toggle=o;const n=t.createDelay();n.delayTime.value=2e-4;const l=t.createDelay();l.delayTime.value=1.5*2e-4;const r=t.createDelay();r.delayTime.value=2.25*2e-4;const c=t.createGain();c.gain.value=5e-4;const d=t.createOscillator();d.frequency.value=.5,e.connect(c),d.connect(c),c.connect(n.delayTime),c.connect(l.delayTime),c.connect(r.delayTime),n.connect(l),l.connect(r),e.connect(r),r.connect(s),e.connect(s),d.start(0);const h=()=>{this.active&&(c.connect(n.delayTime),c.connect(l.delayTime),c.connect(r.delayTime)),requestAnimationFrame(h)};return requestAnimationFrame(h),a})}toggleActive(){this.active=!this.active,this.toggle()}render(){return t("div",{class:"pedal-chorus"},t("h1",null,"<pedal-chorus>"),t("pedal-stomp",{isActive:this.active,onStomp:()=>this.toggleActive()}))}static get style(){return""}}class c{constructor(t){e(this,t),this.max=1,this.min=0,this.step="any",this.value=0,this.rotate=a(this,"rotate",7)}inputHandler(e){const t=parseFloat(e.target.value);this.rotate.emit(t)}render(){return t("div",{class:"pedal-knob"},t("label",{htmlFor:"knob"},this.label),t("input",{id:"knob",type:"range",min:this.min,max:this.max,step:this.step,value:this.value,onInput:e=>this.inputHandler(e)}))}static get style(){return""}}class d{constructor(t){e(this,t),this.active=!1,this.lowPassFreq=5200,this.drive=18}componentWillLoad(){i.addPedal(e=>{const t=i.context,s=t.createGain();this.lowPassNode=t.createBiquadFilter(),this.overdriveNode=t.createWaveShaper();const[a,o]=i.createSwitch(e,s,this.active);return this.toggle=o,s.gain.value=1.175,this.overdriveNode.curve=this.makeDistortionCurve(this.drive),this.overdriveNode.oversample="4x",this.lowPassNode.type="lowpass",this.lowPassNode.frequency.value=this.lowPassFreq,e.connect(this.overdriveNode),this.overdriveNode.connect(this.lowPassNode),this.lowPassNode.connect(s),a})}makeDistortionCurve(e){const t=new Float32Array(44100),s=Math.PI/180;let a,o=0;for(;o<44100;++o)t[o]=(8+e)*(a=2*o/44100-1)*18*s/(Math.PI+e*Math.abs(a));return t}setDriveValue(e){const t=parseFloat(e.detail);this.drive=t,this.overdriveNode.curve=this.makeDistortionCurve(this.drive)}setToneValue(e){const t=parseFloat(e.detail);this.lowPassFreq=t,this.lowPassNode.frequency.value=this.lowPassFreq}toggleActive(){this.active=!this.active,this.toggle()}render(){return t("div",{class:"pedal-overdrive"},t("h1",null,"<pedal-overdrive>"),t("pedal-knob",{label:"Drive",min:10,max:50,value:this.drive,onRotate:e=>this.setDriveValue(e)}),t("pedal-knob",{label:"Tone",min:3500,max:7500,value:this.lowPassFreq,onRotate:e=>this.setToneValue(e)}),t("pedal-stomp",{isActive:this.active,onStomp:()=>this.toggleActive()}))}static get style(){return""}}var h,u=(function(e){!function(){var t={}.hasOwnProperty;function s(){for(var e=[],a=0;a<arguments.length;a++){var o=arguments[a];if(o){var i=typeof o;if("string"===i||"number"===i)e.push(o);else if(Array.isArray(o)&&o.length){var n=s.apply(null,o);n&&e.push(n)}else if("object"===i)for(var l in o)t.call(o,l)&&o[l]&&e.push(l)}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):window.classNames=s}()}(h={exports:{}}),h.exports);class p{constructor(t){e(this,t),this.isActive=!1,this.stomp=a(this,"stomp",7)}stompHandler(){this.stomp.emit()}render(){const e=u("PedalStomp",{"PedalStomp--active":this.isActive});return t("div",{class:e},t("div",{class:"PedalStomp__led"}),t("button",{class:"PedalStomp__switch",onClick:()=>this.stompHandler()},"Toggle"))}static get style(){return":host{--led:#48b2ee}.PedalStomp__switch{background:#464646;border:0;border-top:1px solid rgba(0,0,0,.15);border-radius:3px;font-size:0;height:120px;position:relative;width:100%}.PedalStomp__switch:after,.PedalStomp__switch:before{border-radius:10px;content:\"\";height:4px;position:absolute;top:15px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:80%}.PedalStomp__switch:before{background:#343434;border-top:1px solid rgba(0,0,0,.25);border-bottom:1px solid hsla(0,0%,100%,.25);border-right:2px solid hsla(0,0%,100%,.25);border-left:2px solid rgba(0,0,0,.25)}.PedalStomp--active .PedalStomp__switch{background:#fafafa;background:-webkit-gradient(linear,left top,left bottom,from(#424242),color-stop(85%,#252525),to(#020202));background:linear-gradient(180deg,#424242 0,#252525 85%,#020202)}.PedalStomp--active .PedalStomp__switch:before{background:var(--led)}.PedalStomp--active .PedalStomp__switch:after{-webkit-box-shadow:0 -1px 5px var(--led),-1px 0 5px var(--led),1px 0 5px var(--led),0 1px 5px hsla(0,0%,100%,.25);box-shadow:0 -1px 5px var(--led),-1px 0 5px var(--led),1px 0 5px var(--led),0 1px 5px hsla(0,0%,100%,.25);opacity:.25}"}}export{o as app_home,n as pedal_board,l as pedal_boost,r as pedal_chorus,c as pedal_knob,d as pedal_overdrive,p as pedal_stomp};