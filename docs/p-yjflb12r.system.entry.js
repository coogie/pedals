System.register(["./p-8de89bf3.system.js"],function(e){"use strict";var t,n,o,r;return{setters:[function(e){t=e.r;n=e.h;o=e.g;r=e.c}],execute:function(){var a=function(){function e(e){t(this,e)}e.prototype.render=function(){return n("div",{class:"app-home"},n("pedal-board",null))};Object.defineProperty(e,"style",{get:function(){return".app-home{padding:10px}button{background:#5851ff;color:#fff;margin:8px;border:none;font-size:13px;font-weight:700;text-transform:uppercase;padding:16px 20px;border-radius:2px;-webkit-box-shadow:0 8px 16px rgba(0,0,0,.1),0 3px 6px rgba(0,0,0,.08);box-shadow:0 8px 16px rgba(0,0,0,.1),0 3px 6px rgba(0,0,0,.08);outline:0;letter-spacing:.04em;-webkit-transition:all .15s ease;transition:all .15s ease;cursor:pointer}button:hover{-webkit-box-shadow:0 3px 6px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.1);box-shadow:0 3px 6px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.1);-webkit-transform:translateY(1px);transform:translateY(1px)}"},enumerable:true,configurable:true});return e}();e("app_home",a);var i={context:new AudioContext,sources:[],pedals:[],toggleOnOff:function(e,t){return function(n){var o=n===undefined?!!e.gain.value:n;if(o){t.gain.value=1;e.gain.value=0}else{t.gain.value=0;e.gain.value=1}}},createSwitch:function(e,t,n){if(n===void 0){n=false}var o=this.context.createGain();var r=this.context.createGain();var a=this.context.createGain();var i=this.toggleOnOff(o,r);i(n);e.connect(o);t.connect(r);o.connect(a);r.connect(a);return[a,i]},addPedal:function(e){this.pedals.push(e)},sealPedalBoard:function(){var e=this.context.createGain();for(var t=0,n=this.sources;t<n.length;t++){var o=n[t];var r=this.context.createMediaElementSource(o);r.connect(e)}var a=this.pedals.reduce(function(e,t){return t(e)},e);a.connect(this.context.destination)}};var s=function(){function e(e){t(this,e);this.playing=false;this.demoFileNodes=[]}e.prototype.componentWillLoad=function(){var e=["FloatingRotary","NoFear","OrangeDrive","TheSeventies","TombComb","VintageCombo"];var t=document.createDocumentFragment();for(var n=0,o=e;n<o.length;n++){var r=o[n];var a=document.createElement("audio");a.src="assets/audio/"+r+".mp3";a.id=r;a.loop=true;this.demoFileNodes.push(a);i.sources.push(a)}this.el.appendChild(t);this.setActiveAudioNode(0)};e.prototype.setActiveAudioNode=function(e){this.togglePlaying("pause");this.audioNode=this.demoFileNodes[e]};e.prototype.componentDidLoad=function(){i.sealPedalBoard()};e.prototype.togglePlaying=function(e){if(e===void 0){e=null}if(!this.audioNode)return;var t=i.context;if(t.state==="suspended"){t.resume()}if(e){if(e==="pause"){this.audioNode.pause();this.playing=true}if(e==="play"){this.audioNode.play();this.playing=true}}if(!this.playing){this.audioNode.play();this.playing=true}else if(this.playing){this.audioNode.pause();this.playing=false}};e.prototype.render=function(){var e=this;return n("div",{class:"PedalBoard"},n("select",{onChange:function(t){return e.setActiveAudioNode(t.target.value)}},this.demoFileNodes.map(function(e,t){return n("option",{value:t},e.id)})),n("button",{onClick:function(){return e.togglePlaying()}},this.playing?"◼":"►"),n("div",{class:"PedalBoard__pedals"},n("pedal-chorus",null),n("pedal-boost",null),n("pedal-overdrive",null)))};Object.defineProperty(e.prototype,"el",{get:function(){return o(this)},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return".PedalBoard__pedals{display:-ms-flexbox;display:flex}.PedalBoard__pedals>*{border:1px solid;margin:1em}"},enumerable:true,configurable:true});return e}();e("pedal_board",s);var l=function(){function e(e){t(this,e);this.active=false;this.boost=1.5}e.prototype.componentWillLoad=function(){var e=this;i.addPedal(function(t){var n=i.context;var o=n.createGain();var r=n.createGain();var a=i.createSwitch(t,o,e.active),s=a[0],l=a[1];e.toggle=l;e.boostNode=r;t.connect(r);r.connect(o);return s})};e.prototype.setBoostValue=function(e){var t=parseFloat(e.detail);this.boostNode.gain.value=t};e.prototype.toggleActive=function(){this.active=!this.active;this.toggle()};e.prototype.render=function(){var e=this;return n("div",{class:"pedal-boost"},n("h1",null,"<pedal-boost>"),n("pedal-knob",{label:"Boost",min:0,max:3,value:this.boost,onRotate:function(t){return e.setBoostValue(t)}}),n("pedal-stomp",{isActive:this.active,onStomp:function(){return e.toggleActive()}}))};Object.defineProperty(e,"style",{get:function(){return""},enumerable:true,configurable:true});return e}();e("pedal_boost",l);var c=function(){function e(e){t(this,e);this.active=false}e.prototype.componentWillLoad=function(){var e=this;i.addPedal(function(t){var n={speed:.5,delay:2e-4,depth:5e-4};var o=i.context;var r=o.createGain();var a=i.createSwitch(t,r,e.active),s=a[0],l=a[1];e.toggle=l;var c=o.createDelay();c.delayTime.value=n.delay;var u=o.createDelay();u.delayTime.value=n.delay*1.5;var d=o.createDelay();d.delayTime.value=n.delay*2.25;var p=o.createGain();p.gain.value=n.depth;var v=o.createOscillator();v.frequency.value=n.speed;t.connect(p);v.connect(p);p.connect(c.delayTime);p.connect(u.delayTime);p.connect(d.delayTime);c.connect(u);u.connect(d);t.connect(d);d.connect(r);t.connect(r);v.start(0);var h=function(){if(e.active){p.connect(c.delayTime);p.connect(u.delayTime);p.connect(d.delayTime)}requestAnimationFrame(h)};requestAnimationFrame(h);return s})};e.prototype.toggleActive=function(){this.active=!this.active;this.toggle()};e.prototype.render=function(){var e=this;return n("div",{class:"pedal-chorus"},n("h1",null,"<pedal-chorus>"),n("pedal-stomp",{isActive:this.active,onStomp:function(){return e.toggleActive()}}))};Object.defineProperty(e,"style",{get:function(){return""},enumerable:true,configurable:true});return e}();e("pedal_chorus",c);var u=function(){function e(e){t(this,e);this.max=1;this.min=0;this.step="any";this.value=0;this.rotate=r(this,"rotate",7)}e.prototype.inputHandler=function(e){var t=parseFloat(e.target.value);this.rotate.emit(t)};e.prototype.render=function(){var e=this;return n("div",{class:"pedal-knob"},n("label",{htmlFor:"knob"},this.label),n("input",{id:"knob",type:"range",min:this.min,max:this.max,step:this.step,value:this.value,onInput:function(t){return e.inputHandler(t)}}))};Object.defineProperty(e,"style",{get:function(){return""},enumerable:true,configurable:true});return e}();e("pedal_knob",u);var d=function(){function e(e){t(this,e);this.active=false;this.lowPassFreq=5200;this.drive=18}e.prototype.componentWillLoad=function(){var e=this;i.addPedal(function(t){var n=i.context;var o=n.createGain();e.lowPassNode=n.createBiquadFilter();e.overdriveNode=n.createWaveShaper();var r=i.createSwitch(t,o,e.active),a=r[0],s=r[1];e.toggle=s;o.gain.value=1.175;e.overdriveNode.curve=e.makeDistortionCurve(e.drive);e.overdriveNode.oversample="4x";e.lowPassNode.type="lowpass";e.lowPassNode.frequency.value=e.lowPassFreq;t.connect(e.overdriveNode);e.overdriveNode.connect(e.lowPassNode);e.lowPassNode.connect(o);return a})};e.prototype.makeDistortionCurve=function(e){var t=44100;var n=new Float32Array(t);var o=Math.PI/180;var r=0;var a;for(;r<t;++r){a=r*2/t-1;n[r]=(8+e)*a*18*o/(Math.PI+e*Math.abs(a))}return n};e.prototype.setDriveValue=function(e){var t=parseFloat(e.detail);this.drive=t;this.overdriveNode.curve=this.makeDistortionCurve(this.drive)};e.prototype.setToneValue=function(e){var t=parseFloat(e.detail);this.lowPassFreq=t;this.lowPassNode.frequency.value=this.lowPassFreq};e.prototype.toggleActive=function(){this.active=!this.active;this.toggle()};e.prototype.render=function(){var e=this;return n("div",{class:"pedal-overdrive"},n("h1",null,"<pedal-overdrive>"),n("pedal-knob",{label:"Drive",min:10,max:50,value:this.drive,onRotate:function(t){return e.setDriveValue(t)}}),n("pedal-knob",{label:"Tone",min:3500,max:7500,value:this.lowPassFreq,onRotate:function(t){return e.setToneValue(t)}}),n("pedal-stomp",{isActive:this.active,onStomp:function(){return e.toggleActive()}}))};Object.defineProperty(e,"style",{get:function(){return""},enumerable:true,configurable:true});return e}();e("pedal_overdrive",d);function p(e,t){return t={exports:{}},e(t,t.exports),t.exports}var v=p(function(e){(function(){var t={}.hasOwnProperty;function n(){var e=[];for(var o=0;o<arguments.length;o++){var r=arguments[o];if(!r)continue;var a=typeof r;if(a==="string"||a==="number"){e.push(r)}else if(Array.isArray(r)&&r.length){var i=n.apply(null,r);if(i){e.push(i)}}else if(a==="object"){for(var s in r){if(t.call(r,s)&&r[s]){e.push(s)}}}}return e.join(" ")}if(e.exports){n.default=n;e.exports=n}else{window.classNames=n}})()});var h=function(){function e(e){t(this,e);this.isActive=false;this.stomp=r(this,"stomp",7)}e.prototype.stompHandler=function(){this.stomp.emit()};e.prototype.render=function(){var e=this;var t=v("PedalStomp",{"PedalStomp--active":this.isActive});return n("div",{class:t},n("div",{class:"PedalStomp__led"}),n("button",{class:"PedalStomp__switch",onClick:function(){return e.stompHandler()}},"Toggle"))};Object.defineProperty(e,"style",{get:function(){return":host{--led:#48b2ee}.PedalStomp__switch{background:#464646;border:0;border-top:1px solid rgba(0,0,0,.15);border-radius:3px;font-size:0;height:120px;position:relative;width:100%}.PedalStomp__switch:after,.PedalStomp__switch:before{border-radius:10px;content:\"\";height:4px;position:absolute;top:15px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:80%}.PedalStomp__switch:before{background:#343434;border-top:1px solid rgba(0,0,0,.25);border-bottom:1px solid hsla(0,0%,100%,.25);border-right:2px solid hsla(0,0%,100%,.25);border-left:2px solid rgba(0,0,0,.25)}.PedalStomp--active .PedalStomp__switch{background:#fafafa;background:-webkit-gradient(linear,left top,left bottom,from(#424242),color-stop(85%,#252525),to(#020202));background:linear-gradient(180deg,#424242 0,#252525 85%,#020202)}.PedalStomp--active .PedalStomp__switch:before{background:var(--led)}.PedalStomp--active .PedalStomp__switch:after{-webkit-box-shadow:0 -1px 5px var(--led),-1px 0 5px var(--led),1px 0 5px var(--led),0 1px 5px hsla(0,0%,100%,.25);box-shadow:0 -1px 5px var(--led),-1px 0 5px var(--led),1px 0 5px var(--led),0 1px 5px hsla(0,0%,100%,.25);opacity:.25}"},enumerable:true,configurable:true});return e}();e("pedal_stomp",h)}}});